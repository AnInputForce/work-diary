# Docker徒手写个自动发现的部署系统

# 环境准备

参考：在Mac中直接安装Maridb（不推荐），[Mac中MariaDB数据库的安装步骤](http://www.jb51.net/article/93202.htm)

## Docker-Mariadb搭建

参考： [docker（6）：使用dokcer 构建 mariadb 数据库](http://blog.csdn.net/freewebsys/article/details/53540615)

> 使用一个最简单的办法安装了mariadb。并且将数据放到了宿主机的/data/mysql/data 目录下面了。 方便数据备份,数据迁移，同时暴露了3306端口对外。 使用docker还是非常的方便的，比起yum安装配置简单多了。 配置文件也可以通过目录映射的方式修改。 而且完全的拆分了服务，存储，接口。真的是一个集装箱了。

参考：[Start a `mariadb` server instance](https://hub.docker.com/_/mariadb/)，强烈推荐。

### 下载Mariadb数据库镜像

```shell
docker pull mariadb
```

### 启动并配置DB

```shell
$ mkdir -p ~/mariadb/data ~/mariadb/custom
$ docker run --name some-mariadb -v ~/mariadb/data:/var/lib/mysql   -v ~/mariadb/custom:/etc/mysql/conf.d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1q2w -d mariadb:latest --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
77de3a6bf3febd3a8c5de9d35529a868af7c61979420c17c938716dd3683b05d
```

### 测试验证

```shell
$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
77de3a6bf3fe        mariadb:latest      "docker-entrypoint..."   2 minutes ago       Up About a minute   0.0.0.0:3306->3306/tcp   some-mariadb
$ docker exec -it some-mariadb bash
root@77de3a6bf3fe:/# mysql -uroot -p1q2w
Welcome to the MariaDB monitor.  Commands end with ; or \g.
....
MariaDB [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0.02 sec)
```

参考：[mysql使用utf8mb4经验吐血总结](http://www.cnblogs.com/xiangcaiduoyidian/p/6210037.html)

## Docker-Django搭建

待补

## Docker开发机配置SSH免密登录

原因：开发机由于使用频繁，每次输入账号登录难免浪费时间。我们改造之。

## 起因：Docker带来的网络的挑战

# 自动发现Docker Server的上线部署系统

## 环境准备

如上所示，已准备好。

## 思路分析

## 开发

